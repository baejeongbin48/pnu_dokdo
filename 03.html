<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë…ë„ í•µì‹¬ ìš©ì–´ ì•„ì¹´ì´ë¸Œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Noto+Serif+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f5f5f4; /* Stone 100 */
        }
        h1, h2, h3, .serif {
            font-family: 'Noto Serif KR', serif;
        }
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #a8a29e;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #78716c;
        }
        
        /* Chart Container Logic */
        .chart-wrapper {
            position: relative;
            width: 100%;
            height: 300px;
            max-height: 300px;
        }
        
        /* Tab Active State */
        .tab-btn.active {
            background-color: #1c1917; /* Stone 900 */
            color: white;
            border-color: #1c1917;
        }
    </style>
    <!-- Chosen Palette: Stone (Warm Grey) for background, Navy Blue (Korea), Muted Red (Japan/Conflict), Gold (Key Evidence) -->
    <!-- Application Structure Plan: 
         Header: Title and Home Link.
         Nav: Tab-based navigation (Names, Documents, People) + Search Bar.
         Main Content: Dynamic grid layout that changes based on selected tab.
         - 'Names' Tab: Timeline/Card flow.
         - 'Documents' Tab: Interactive Grid + Analytical Donut Chart showing origin of evidence.
         - 'People' Tab: Profile cards.
         Reasoning: Tab structure prevents information overload, allowing users to focus on one category of terminology at a time. The chart adds analytical depth to the document list.
    -->
    <!-- Visualization & Content Choices:
         1. Interactive Cards: Used for all glossary items. Allows digesting complex definitions in bite-sized chunks.
         2. Evidence Distribution Chart (Donut): Placed in 'Documents' tab. Visualizes that a significant portion of evidence supporting Korea comes from Japanese or International sources (Analysis).
         3. Color Coding: Blue tags for Korea, Red for Japan, Gray for Intl. Helps instant recognition of origin.
         4. Search: Javascript filter to quickly find terms like "Seokdo" or "Scapin".
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="text-stone-800 antialiased min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-stone-900 text-stone-100 py-6 px-4 shadow-lg border-b-4 border-stone-700">
        <div class="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
            <div>
                <a href="index.html" class="inline-flex items-center px-3 py-1.5 rounded-lg bg-stone-800 hover:bg-stone-700 border border-stone-700 text-stone-300 hover:text-white transition-all duration-200 text-sm font-medium group mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                    </svg>
                    í™ˆìœ¼ë¡œ
                </a>
                <h1 class="text-2xl md:text-4xl font-bold serif tracking-wide">ë…ë„ í•µì‹¬ ìš©ì–´ ì‚¬ì „</h1>
                <p class="text-stone-400 text-sm mt-1">ì˜¬ë°”ë¥¸ ì—­ì‚¬ë¥¼ ìœ„í•œ í•„ìˆ˜ ì–´íœ˜ì™€ ë¬¸í—Œ ê°€ì´ë“œ</p>
            </div>
            
            <!-- Search Bar -->
            <div class="w-full md:w-auto relative">
                <input type="text" id="searchInput" placeholder="ìš©ì–´ ê²€ìƒ‰ (ì˜ˆ: ì•ˆìš©ë³µ, ì¹™ë ¹)" 
                    class="w-full md:w-64 px-4 py-2 rounded-full bg-stone-800 border border-stone-600 text-stone-200 placeholder-stone-500 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm transition-all">
            </div>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <nav class="bg-white border-b border-stone-200 sticky top-0 z-30 shadow-sm">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex space-x-2 md:space-x-8 overflow-x-auto no-scrollbar py-3">
                <button onclick="switchTab('names')" class="tab-btn active px-4 py-2 rounded-lg border border-transparent text-sm md:text-base font-bold transition-all whitespace-nowrap" id="tab-names">
                    1. ëª…ì¹­ ë³€ì²œì‚¬
                </button>
                <button onclick="switchTab('documents')" class="tab-btn px-4 py-2 rounded-lg border border-transparent text-sm md:text-base font-medium text-stone-500 hover:bg-stone-100 transition-all whitespace-nowrap" id="tab-documents">
                    2. í•µì‹¬ ê³ ë¬¸ì„œ
                </button>
                <button onclick="switchTab('people')" class="tab-btn px-4 py-2 rounded-lg border border-transparent text-sm md:text-base font-medium text-stone-500 hover:bg-stone-100 transition-all whitespace-nowrap" id="tab-people">
                    3. ì¸ë¬¼ ë° ì‚¬ê±´
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-grow max-w-6xl mx-auto px-4 py-8 w-full">
        
        <!-- INTRO SECTION (Dynamic) -->
        <div id="section-intro" class="mb-8 p-6 bg-white rounded-xl shadow-sm border border-stone-200">
            <h2 class="text-xl font-bold serif mb-2 text-stone-800" id="intro-title">ëª…ì¹­ì˜ ì—­ì‚¬</h2>
            <p class="text-stone-600 leading-relaxed text-sm md:text-base" id="intro-desc">
                ë…ë„ì˜ ì´ë¦„ì€ ì‹œëŒ€ì™€ ì£¼ì²´ì— ë”°ë¼ ë‹¤ì–‘í•˜ê²Œ ë¶ˆë ¸ìŠµë‹ˆë‹¤. 'ìš°ì‚°ë„'ë¶€í„° í˜„ì¬ì˜ 'ë…ë„'ì— ì´ë¥´ê¸°ê¹Œì§€, ëª…ì¹­ì˜ ë³€í™”ëŠ” ê³§ ì˜ìœ ê¶Œ ì¸ì‹ì˜ ì—­ì‚¬ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
            </p>
        </div>

        <!-- VIEW: NAMES -->
        <div id="view-names" class="view-section grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <!-- Content injected by JS -->
        </div>

        <!-- VIEW: DOCUMENTS -->
        <div id="view-documents" class="view-section hidden">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Analytics Column -->
                <div class="lg:col-span-1 space-y-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                        <h3 class="font-bold serif text-lg mb-4">ì¦ê±° ë¬¸í—Œ ì¶œì²˜ ë¶„ì„</h3>
                        <p class="text-xs text-stone-500 mb-4">
                            í•µì‹¬ ì¦ê±° ìë£Œë“¤ì´ ì–´ëŠ ë‚˜ë¼ì˜ ë¬¸í—Œì¸ì§€ ë¶„ì„í•©ë‹ˆë‹¤. ì¼ë³¸ ë¬¸í—Œì´ ìŠ¤ìŠ¤ë¡œ ë…ë„ë¥¼ í•œêµ­ ë•…ìœ¼ë¡œ ì¸ì •í•œ ì‚¬ë¡€ê°€ ë‹¤ìˆ˜ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
                        </p>
                        <div class="chart-wrapper mx-auto">
                            <canvas id="docChart"></canvas>
                        </div>
                        <div class="mt-4 grid grid-cols-3 gap-2 text-center text-xs">
                            <div class="p-2 bg-blue-50 rounded text-blue-800 font-bold">ğŸ‡°ğŸ‡· í•œêµ­<br><span id="stat-kr">0</span>ê±´</div>
                            <div class="p-2 bg-red-50 rounded text-red-800 font-bold">ğŸ‡¯ğŸ‡µ ì¼ë³¸<br><span id="stat-jp">0</span>ê±´</div>
                            <div class="p-2 bg-stone-100 rounded text-stone-800 font-bold">ğŸŒ êµ­ì œ<br><span id="stat-intl">0</span>ê±´</div>
                        </div>
                    </div>
                </div>

                <!-- Cards Grid -->
                <div class="lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6" id="documents-grid">
                    <!-- Content injected by JS -->
                </div>
            </div>
        </div>

        <!-- VIEW: PEOPLE -->
        <div id="view-people" class="view-section hidden grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Content injected by JS -->
        </div>

        <!-- Empty State for Search -->
        <div id="empty-search" class="hidden text-center py-20">
            <div class="text-4xl mb-4">ğŸ”</div>
            <h3 class="text-lg font-bold text-stone-400">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
            <p class="text-stone-500">ë‹¤ë¥¸ í‚¤ì›Œë“œë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”.</p>
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-stone-200 py-8 text-center text-stone-500 text-sm border-t border-stone-300 mt-auto">
        <div class="max-w-6xl mx-auto px-4">
            <p class="font-bold mb-2">Dokdo Digital Glossary</p>
            <p>ë³¸ ìë£ŒëŠ” ì œê³µëœ ì†ŒìŠ¤ ë¦¬í¬íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- DATA SOURCE ---
        const glossaryData = {
            names: [
                { id: "n1", term: "ìš°ì‚°ë„", hanja: "äºå±±å³¶", desc: "ì‚¼êµ­ì‹œëŒ€ ìš°ì‚°êµ­ì—ì„œ ìœ ë˜í•œ ë…ë„ì˜ ì˜› ì´ë¦„.", tag: "ê°€ì¥ ì˜¤ë˜ëœ ëª…ì¹­", type: "korea" },
                { id: "n2", term: "ì„ë„", hanja: "çŸ³å³¶", desc: "1900ë…„ ëŒ€í•œì œêµ­ ì¹™ë ¹ ì œ41í˜¸ ê³µì‹ ëª…ì¹­. 'ëŒì„¬'ì˜ ì´ë‘ì‹ í‘œê¸°.", tag: "ê´€í• ê¶Œ ì…ì¦", type: "korea" },
                { id: "n3", term: "ë§ˆì“°ì‹œë§ˆ", hanja: "æ¾å³¶", desc: "ê³¼ê±° ì¼ë³¸ì´ ë…ë„ë¥¼ ë¶€ë¥´ë˜ ëª…ì¹­ (ë‹¹ì‹œ ìš¸ë¦‰ë„ëŠ” 'ì£½ë„').", tag: "ëª…ì¹­ í˜¼ë€", type: "japan" },
                { id: "n4", term: "ë¦¬ì•™ì¿ ë¥´ì•”", hanja: "Liancourt Rocks", desc: "1849ë…„ í”„ë‘ìŠ¤ í¬ê²½ì„ ì´ ë°œê²¬ í›„ ë¶™ì¸ ì„œì–‘ì‹ ëª…ì¹­.", tag: "êµ­ì œ ëª…ì¹­", type: "intl" }
            ],
            documents: [
                { id: "d1", title: "ì„¸ì¢…ì‹¤ë¡ì§€ë¦¬ì§€", year: 1454, origin: "korea", content: "ìš°ì‚°, ë¬´ë¦‰ ë‘ ì„¬ì´ ìš¸ì§„í˜„ ì •ë™ìª½ì— ìˆìœ¼ë©° ì„œë¡œ ë°”ë¼ë³¼ ìˆ˜ ìˆìŒ.", meaning: "ì§€ë¦¬ì  ì¸ì‹ ì¦ê±°" },
                { id: "d2", title: "ì€ì£¼ì‹œì²­í•©ê¸°", year: 1667, origin: "japan", content: "ìš¸ë¦‰ë„ì™€ ë…ë„ëŠ” ì¼ë³¸ ì˜í†  ë°–(ì¡°ì„  ë•…)ì„ì„ ê¸°ë¡.", meaning: "ì¼ë³¸ ìµœì´ˆì˜ ì¸ì •" },
                { id: "d3", title: "íƒœì •ê´€ ì§€ë ¹", year: 1877, origin: "japan", content: "ìµœê³  í–‰ì •ê¸°ê´€ì´ 'ë…ë„ì™€ ìš¸ë¦‰ë„ëŠ” ì¼ë³¸ê³¼ ë¬´ê´€í•¨' ê³µì‹ ì¸ì •.", meaning: "ê²°ì •ì  ë°˜ë°• ì¦ê±°" },
                { id: "d4", title: "ëŒ€í•œì œêµ­ ì¹™ë ¹ 41í˜¸", year: 1900, origin: "korea", content: "ê³ ì¢… í™©ì œê°€ ë…ë„(ì„ë„)ë¥¼ ìš¸ë¦‰êµ°ì˜ ê´€í•  êµ¬ì—­ìœ¼ë¡œ ê³µì‹ ë°˜í¬.", meaning: "ê·¼ëŒ€ì  ì£¼ê¶Œ í–‰ì‚¬" },
                { id: "d5", title: "ì‹œë§ˆë„¤í˜„ ê³ ì‹œ 40í˜¸", year: 1905, origin: "japan", content: "ëŸ¬ì¼ì „ìŸ ì¤‘ ì£¼ì¸ ì—†ëŠ” ë•…(ë¬´ì£¼ì§€)ì´ë¼ ì£¼ì¥í•˜ë©° ë¶ˆë²• í¸ì….", meaning: "ì œêµ­ì£¼ì˜ ì¹¨íƒˆ" },
                { id: "d6", title: "SCAPIN ì œ677í˜¸", year: 1946, origin: "intl", content: "ì—°í•©êµ°ìµœê³ ì‚¬ë ¹ê´€ ì§€ë ¹. ë…ë„ë¥¼ ì¼ë³¸ì˜ í†µì¹˜ê¶Œì—ì„œ ì œì™¸í•¨.", meaning: "ì „í›„ ì²˜ë¦¬ ê¸°ì¤€" }
            ],
            people: [
                { id: "p1", name: "ì•ˆìš©ë³µ", sub: "ì¡°ì„  ìˆ™ì¢… ë•Œì˜ ì–´ë¶€", desc: "ì¼ë³¸ì— ê±´ë„ˆê°€ ë…ë„ê°€ ì¡°ì„  ë•…ì„ì„ ê°•ë ¥íˆ ì£¼ì¥í•˜ì—¬ ë§‰ë¶€ì˜ 'ë„í•´ ê¸ˆì§€ë ¹'ì„ ì´ëŒì–´ëƒ„.", type: "hero" },
                { id: "p2", name: "ë…ë„ì˜ìš©ìˆ˜ë¹„ëŒ€", sub: "1950ë…„ëŒ€ ë¯¼ê°„ ìˆ˜ë¹„ëŒ€", desc: "í•œêµ­ì „ìŸ í˜¼ë€ê¸°ì— í™ìˆœì¹  ëŒ€ì¥ ë“±ì´ ìë°œì ìœ¼ë¡œ ê²°ì„±í•˜ì—¬ ë…ë„ë¥¼ ë¬´ì¥ ìˆ˜í˜¸í•¨.", type: "hero" },
                { id: "p3", name: "í‰í™”ì„ ", sub: "ì´ìŠ¹ë§Œ ë¼ì¸ (1952)", desc: "ì´ìŠ¹ë§Œ ëŒ€í†µë ¹ì´ ì„ í¬í•œ í•´ì–‘ ì£¼ê¶Œ ì„ ì–¸. ë…ë„ë¥¼ í¬í•¨í•œ ì¸ì ‘ í•´ì–‘ ì£¼ê¶Œì„ ëª…í™•íˆ í•¨.", type: "policy" },
                { id: "p4", name: "ë‹¤ì¼€ì‹œë§ˆì˜ ë‚ ", sub: "2ì›” 22ì¼ (2005 ì œì •)", desc: "ì¼ë³¸ ì‹œë§ˆë„¤í˜„ì´ 1905ë…„ì˜ ë¶ˆë²• í¸ì…ì„ ê¸°ë…í•˜ì—¬ ì œì •í•œ ë‚ . ê°ˆë“±ì˜ ì›ì¸.", type: "conflict" }
            ]
        };

        const descriptions = {
            names: { title: "ëª…ì¹­ ë³€ì²œì‚¬", text: "ë…ë„ì˜ ì´ë¦„ì€ ë‹¨ìˆœí•œ í˜¸ì¹­ì´ ì•„ë‹™ë‹ˆë‹¤. 'ìš°ì‚°ë„'ì—ì„œ 'ì„ë„'ë¡œ ì´ì–´ì§€ëŠ” í•œêµ­ì˜ ê¸°ë¡ê³¼, í˜¼ë€ìŠ¤ëŸ¬ì› ë˜ ì¼ë³¸ì˜ ëª…ì¹­('ë§ˆì“°ì‹œë§ˆ')ì„ ë¹„êµí•´ë³´ë©´ ëˆ„ê°€ ì£¼ì¸ìœ¼ë¡œì„œ ëª…í™•íˆ ì¸ì‹í•˜ê³  ìˆì—ˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤." },
            documents: { title: "í•µì‹¬ ê³ ë¬¸ì„œ (ì¦ê±°)", text: "ì˜ìœ ê¶Œ ë…¼ìŸì˜ í•µì‹¬ì€ ë¬¸í—Œ ì¦ê±°ì— ìˆìŠµë‹ˆë‹¤. ë†€ëê²Œë„ ë…ë„ê°€ í•œêµ­ ë•…ì´ë¼ëŠ” ê°€ì¥ ê²°ì •ì ì¸ ì¦ê±°ë“¤(íƒœì •ê´€ ì§€ë ¹ ë“±)ì€ ì¼ë³¸ ì •ë¶€ì˜ ê³µì‹ ë¬¸ì„œì—ì„œ ë°œê²¬ë©ë‹ˆë‹¤." },
            people: { title: "ì¸ë¬¼ ë° ì‚¬ê±´", text: "ë…ë„ë¥¼ ì§€ì¼œë‚¸ ê²ƒì€ êµ­ê°€ì˜ í˜ë§Œì´ ì•„ë‹ˆì—ˆìŠµë‹ˆë‹¤. ì•ˆìš©ë³µê³¼ ë…ë„ì˜ìš©ìˆ˜ë¹„ëŒ€ ê°™ì€ ë¯¼ê°„ì˜ í—Œì‹ ì´ ìˆì—ˆê¸°ì— ì˜¤ëŠ˜ë‚ ì˜ ë…ë„ê°€ ìˆìŠµë‹ˆë‹¤. ë°˜ë©´ 'ë‹¤ì¼€ì‹œë§ˆì˜ ë‚ ' ê°™ì€ ê°ˆë“±ì˜ ì”¨ì•—ë„ ì—¬ì „íˆ ì¡´ì¬í•©ë‹ˆë‹¤." }
        };

        // --- STATE & UTILS ---
        let currentTab = 'names';
        let chartInstance = null;

        function getOriginStyle(origin) {
            if (origin === 'korea') return { bg: 'bg-blue-50', text: 'text-blue-900', border: 'border-blue-200', badge: 'bg-blue-100 text-blue-700', label: 'ğŸ‡°ğŸ‡· í•œêµ­' };
            if (origin === 'japan') return { bg: 'bg-red-50', text: 'text-red-900', border: 'border-red-200', badge: 'bg-red-100 text-red-700', label: 'ğŸ‡¯ğŸ‡µ ì¼ë³¸' };
            return { bg: 'bg-stone-100', text: 'text-stone-900', border: 'border-stone-300', badge: 'bg-stone-200 text-stone-700', label: 'ğŸŒ êµ­ì œ' };
        }

        // --- RENDERING FUNCTIONS ---

        function renderNames(filterText = '') {
            const container = document.getElementById('view-names');
            container.innerHTML = '';
            
            const filtered = glossaryData.names.filter(item => item.term.includes(filterText) || item.desc.includes(filterText));
            
            if (filtered.length === 0 && filterText) {
                document.getElementById('empty-search').classList.remove('hidden');
                return;
            }

            filtered.forEach(item => {
                const style = getOriginStyle(item.type);
                const el = document.createElement('div');
                el.className = `bg-white p-6 rounded-xl border ${style.border} shadow-sm card-hover flex flex-col h-full relative overflow-hidden`;
                el.innerHTML = `
                    <div class="absolute top-0 right-0 p-4 opacity-10 font-serif text-6xl font-bold select-none text-stone-400">
                        ${item.hanja !== item.term ? item.hanja.charAt(0) : ''}
                    </div>
                    <div class="mb-4">
                        <span class="text-xs font-bold uppercase tracking-wider ${style.badge} px-2 py-1 rounded inline-block mb-2">${style.label}</span>
                        <h3 class="text-2xl font-bold serif text-stone-900">${item.term}</h3>
                        <p class="text-stone-500 text-sm font-serif">${item.hanja}</p>
                    </div>
                    <p class="text-stone-600 text-sm leading-relaxed mb-4 flex-grow">${item.desc}</p>
                    <div class="mt-auto pt-4 border-t border-stone-100">
                        <span class="text-xs font-semibold text-stone-400">ğŸ’¡ KEY POINT</span>
                        <p class="text-sm font-medium ${style.text}">${item.tag}</p>
                    </div>
                `;
                container.appendChild(el);
            });
        }

        function renderDocuments(filterText = '') {
            const container = document.getElementById('documents-grid');
            container.innerHTML = '';
            
            const filtered = glossaryData.documents.filter(item => item.title.includes(filterText) || item.content.includes(filterText));
            
            if (filtered.length === 0 && filterText) {
                document.getElementById('empty-search').classList.remove('hidden');
                return;
            }

            filtered.forEach(item => {
                const style = getOriginStyle(item.origin);
                const el = document.createElement('div');
                el.className = `bg-white p-6 rounded-xl border-l-4 ${style.border.replace('border', 'border-l-' + style.border.split('-')[1] + '-500')} shadow-sm card-hover`;
                el.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <h3 class="text-xl font-bold serif text-stone-900">${item.title}</h3>
                        <span class="text-lg font-serif text-stone-400 font-bold">${item.year}</span>
                    </div>
                    <span class="text-xs font-bold px-2 py-1 rounded ${style.badge} mb-3 inline-block">${style.label} ë¬¸í—Œ</span>
                    
                    <div class="space-y-3">
                        <div class="bg-stone-50 p-3 rounded text-sm text-stone-700 leading-relaxed">
                            "${item.content}"
                        </div>
                        <div>
                            <span class="text-xs font-bold text-stone-400 uppercase">ì—­ì‚¬ì  ì˜ì˜</span>
                            <p class="text-sm font-bold ${style.text}">${item.meaning}</p>
                        </div>
                    </div>
                `;
                container.appendChild(el);
            });
            
            // Update stats if showing full list
            if (!filterText) updateDocStats();
        }

        function renderPeople(filterText = '') {
            const container = document.getElementById('view-people');
            container.innerHTML = '';
            
            const filtered = glossaryData.people.filter(item => item.name.includes(filterText) || item.desc.includes(filterText));
            
            if (filtered.length === 0 && filterText) {
                document.getElementById('empty-search').classList.remove('hidden');
                return;
            }

            filtered.forEach(item => {
                let icon = 'ğŸ‘¤';
                let style = 'bg-white border-stone-200';
                if (item.type === 'hero') { icon = 'ğŸ›¡ï¸'; style = 'bg-blue-50 border-blue-200'; }
                if (item.type === 'conflict') { icon = 'âš ï¸'; style = 'bg-red-50 border-red-200'; }
                if (item.type === 'policy') { icon = 'ğŸ“œ'; style = 'bg-stone-50 border-stone-200'; }

                const el = document.createElement('div');
                el.className = `${style} border p-6 rounded-xl shadow-sm card-hover flex gap-4 items-start`;
                el.innerHTML = `
                    <div class="text-4xl p-2 bg-white rounded-full shadow-sm">${icon}</div>
                    <div>
                        <h3 class="text-xl font-bold serif text-stone-900">${item.name}</h3>
                        <p class="text-xs font-bold text-stone-500 mb-2 uppercase tracking-wide">${item.sub}</p>
                        <p class="text-stone-700 text-sm leading-relaxed">${item.desc}</p>
                    </div>
                `;
                container.appendChild(el);
            });
        }

        // --- CHART LOGIC ---
        function initChart() {
            const ctx = document.getElementById('docChart');
            if (!ctx) return;

            const counts = { kr: 0, jp: 0, intl: 0 };
            glossaryData.documents.forEach(d => {
                if (d.origin === 'korea') counts.kr++;
                else if (d.origin === 'japan') counts.jp++;
                else counts.intl++;
            });

            // Update text stats
            document.getElementById('stat-kr').innerText = counts.kr;
            document.getElementById('stat-jp').innerText = counts.jp;
            document.getElementById('stat-intl').innerText = counts.intl;

            if (chartInstance) chartInstance.destroy();

            chartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['í•œêµ­ ë¬¸í—Œ', 'ì¼ë³¸ ë¬¸í—Œ', 'êµ­ì œ ë¬¸ì„œ'],
                    datasets: [{
                        data: [counts.kr, counts.jp, counts.intl],
                        backgroundColor: ['#3b82f6', '#ef4444', '#78716c'],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom', labels: { font: { family: "'Noto Sans KR'" } } },
                        tooltip: {
                            callbacks: {
                                label: (ctx) => ` ${ctx.label}: ${ctx.raw}ê±´`
                            }
                        }
                    },
                    cutout: '65%'
                }
            });
        }

        function updateDocStats() {
            if(!chartInstance) initChart();
        }

        // --- INTERACTION LOGIC ---
        
        function switchTab(tabId) {
            currentTab = tabId;
            
            // 1. Update UI Buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active', 'font-bold', 'text-stone-900');
                btn.classList.add('font-medium', 'text-stone-500');
            });
            const activeBtn = document.getElementById(`tab-${tabId}`);
            activeBtn.classList.add('active', 'font-bold');
            activeBtn.classList.remove('font-medium', 'text-stone-500');

            // 2. Update Intro Text
            const introTitle = document.getElementById('intro-title');
            const introDesc = document.getElementById('intro-desc');
            
            // Fade effect
            const introBox = document.getElementById('section-intro');
            introBox.style.opacity = '0';
            setTimeout(() => {
                introTitle.textContent = descriptions[tabId].title;
                introDesc.textContent = descriptions[tabId].text;
                introBox.style.opacity = '1';
            }, 200);

            // 3. Toggle View Visibility
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            document.getElementById(`view-${tabId}`).classList.remove('hidden');

            // 4. Render Content
            const searchText = document.getElementById('searchInput').value.trim();
            if (tabId === 'names') renderNames(searchText);
            if (tabId === 'documents') {
                renderDocuments(searchText);
                // Wait for layout to settle before rendering chart
                setTimeout(initChart, 50); 
            }
            if (tabId === 'people') renderPeople(searchText);
        }

        // --- EVENT LISTENERS ---
        document.getElementById('searchInput').addEventListener('input', (e) => {
            const val = e.target.value.trim();
            document.getElementById('empty-search').classList.add('hidden');
            if (currentTab === 'names') renderNames(val);
            if (currentTab === 'documents') renderDocuments(val);
            if (currentTab === 'people') renderPeople(val);
        });

        // Initialize
        window.onload = function() {
            // Add fade transition to intro
            document.getElementById('section-intro').style.transition = 'opacity 0.2s ease-in-out';
            switchTab('names'); // Load default
        };

    </script>
</body>
</html>
